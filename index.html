<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Frame Generation Calculator</title>
  <meta name="description" content="A simple frame generation calculator that recommends Nvidia FG settings based on your base FPS and monitor refresh rate." />
  <meta name="keywords" content="Frame Generation, Nvidia FG, FPS, Monitor Refresh, Calculator, Nvidia, Reddit, Frame Gen" />
  <meta name="author" content="Fikal" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <style>
    /* Increase font size and spacing on small screens */
    @media (max-width: 576px) {
      body {
        font-size: 1.10rem;
      }
      h1 {
        font-size: 1.3rem;
      }
	  h3 {
        font-size: 1.5rem;
      }
      label, input, button {
        font-size: 1.10rem;
      }
      .container {
        padding: .5rem;
      }
      .form-group {
        margin-bottom: 1.5rem;
      }
    }
	
	@media (min-width: 577px) and (max-width: 1100px) {
	  body {
		font-size: 1.15rem;
	  }
	  h1 {
		font-size: 1.5rem;
	  }
	  h3 {
		font-size: 1.75rem;
	  }
	  label, input, button {
		font-size: 1.15rem;
	  }
	  .container {
		padding: 1rem;
	  }
	  .form-group {
		margin-bottom: 1.5rem;
	  }
	}
  </style>
</head>
<body>
  <div class="container mt-5">
    <h1 class="mb-4">Frame Generation Calculator</h1>
    <!-- Error message placeholder -->
    <div id="errorMsg" class="text-danger mb-3"></div>
    <form id="calcForm">
      <div class="form-group">
        <label for="baseFPS">Base FPS (without FG):</label>
        <input id="baseFPS" class="form-control" type="number" step="any" required value="60"
               max="999"
               oninput="if(this.value.length > 3){this.value = this.value.slice(0,3);}"/>
      </div>
      <div class="form-group">
        <label for="monitorRefresh">Monitor Refresh Rate (Hz):</label>
        <input id="monitorRefresh" class="form-control" type="number" step="any" required value="144"
               max="999"
               oninput="if(this.value.length > 3){this.value = this.value.slice(0,3);}"/>
      </div>
      <button type="submit" class="btn btn-primary">Calculate</button>
    </form>
    <hr />
    <div id="results" style="display: none;">
      <h2>Results</h2>
      <p><strong>Effective Base FPS</strong> : <span id="effectiveBaseFPS"></span></p>
      <p><strong>Effective Monitor Refresh Rate</strong> : <span id="effectiveMonitorFPS"></span></p>
      <h3>Frame Generation Calculations:</h3>
      <ul id="calculationsList"></ul>
      <h3>Recommendation:</h3>
      <div id="recommendation"></div>
    </div>
    <!-- Credit section placed within main container -->
    <div class="text-center mt-4">
      <p class="text-muted">
        Credit: <a href="https://www.reddit.com/r/nvidia/comments/1j2n82b/psa_how_to_correctly_use_frame_gen/" target="_blank">
          achentuate and Nvidia Reddit</a>
      </p>
    </div>
  </div>

  <script>
    // Add event listener to the form submission
    document.getElementById("calcForm").addEventListener("submit", function (e) {
      e.preventDefault();
      // Clear previous errors and results
      document.getElementById("errorMsg").textContent = "";
      document.getElementById("results").style.display = "none";

      // Get input values
      var baseFPS = parseFloat(document.getElementById("baseFPS").value);
      var monitorRefresh = parseFloat(document.getElementById("monitorRefresh").value);
      
      // Validate input values
      if (baseFPS <= 0 || monitorRefresh <= 0) {
        document.getElementById("errorMsg").textContent = "Please enter positive numbers for both fields.";
        return;
      }
      
      // Apply the 10% reduction to both the base FPS and monitor refresh rate
      var effectiveBaseFPS = baseFPS * 0.9;
      var effectiveMonitorFPS = monitorRefresh * 0.9;
      
      // Display effective values
      document.getElementById("effectiveBaseFPS").textContent = effectiveBaseFPS.toFixed(2);
      document.getElementById("effectiveMonitorFPS").textContent = effectiveMonitorFPS.toFixed(2);
      
      // Calculate total FPS for each FG multiplier
      var multipliers = [2, 3, 4];
      var recommendedFG = 0;
      var recommendedTotalFPS = 0;
      var calculationsList = document.getElementById("calculationsList");
      calculationsList.innerHTML = ""; // clear previous results
      
      multipliers.forEach(function(multiplier) {
        var totalFPS = effectiveBaseFPS * multiplier;
        var li = document.createElement("li");
        li.textContent = multiplier + "x FG: Total FPS = " + totalFPS.toFixed(2) + " (Base FPS: " + effectiveBaseFPS.toFixed(2) + ")";
        calculationsList.appendChild(li);
        
        // Choose the multiplier if it does not exceed the effective monitor refresh rate
        if (totalFPS <= effectiveMonitorFPS) {
          recommendedFG = multiplier;
          recommendedTotalFPS = totalFPS;
        }
      });
      
      // Display recommendation
      var recommendationDiv = document.getElementById("recommendation");
      if (recommendedFG > 0) {
        recommendationDiv.innerHTML = "Frame Generation setting: <strong>" + recommendedFG + "x FG</strong><br/><br/>" +
          "This setting gives a total FPS of: " + recommendedTotalFPS.toFixed(2) + ", which is below your monitor cap of " + effectiveMonitorFPS.toFixed(2) + " FPS.";
      } else {
        recommendationDiv.textContent = "None of the available Frame Generation settings (2x, 3x, 4x) are suitable without exceeding your monitor's effective refresh rate.";
      }
      
      // Reveal the results section
      document.getElementById("results").style.display = "block";
    });
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
